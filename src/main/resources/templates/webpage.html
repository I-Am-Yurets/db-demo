<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–∏—Å—Ç–µ–º–∞ –æ–±–ª—ñ–∫—É –≤—ñ–π—Å—å–∫–æ–≤–æ—ó –¥–æ–ø–æ–º–æ–≥–∏</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body>

<h1>üéñÔ∏è –°–∏—Å—Ç–µ–º–∞ –æ–±–ª—ñ–∫—É –≤—ñ–π—Å—å–∫–æ–≤–æ—ó –¥–æ–ø–æ–º–æ–≥–∏</h1>
<p class="subtitle">
    Spring Boot + Spring Data JPA + Hibernate<br>
    <strong>–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∑–∞—Ö–∏—Å—Ç –≤—ñ–¥ SQL Injection —á–µ—Ä–µ–∑ JPA</strong>
</p>

<div style="text-align: center; margin-bottom: 20px;">
    <a th:href="@{/viewAll}"
       class="edit-btn"
       style="font-size: 16px; padding: 10px 20px; text-transform: uppercase; font-weight: bold; display: inline-block;">
        üîç –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –≤—Å—ñ –∑–∞–ø–∏—Å–∏ (–†–µ–∂–∏–º Read)
    </a>
</div>

<div th:if="${error}" style="background: rgba(255,107,107,0.2); padding: 15px; border-radius: 8px; margin: 0 auto 20px; max-width: 1000px; border: 1px solid rgba(255,107,107,0.5);">
    <p style="color: #ff6b6b; margin: 0;" th:utext="${error}"></p>
</div>
<div th:if="${message}" style="background: rgba(144,238,144,0.2); padding: 15px; border-radius: 8px; margin: 0 auto 20px; max-width: 1000px; border: 1px solid rgba(144,238,144,0.5);">
    <p style="color: #90ee90; margin: 0;" th:text="${message}"></p>
</div>

<div class="container-centered">

    <!-- ==================== –ö–†–ê–á–ù–ò ==================== -->
    <div class="column">
        <h2>üåç –ö—Ä–∞—ó–Ω–∏-–¥–æ–Ω–æ—Ä–∏</h2>

        <div class="content-grid">
            <!-- –§–æ—Ä–º–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è -->
            <div>
                <form action="/addCountry" method="post">
                    <div>
                        <div class="label">–ù–∞–∑–≤–∞ –∫—Ä–∞—ó–Ω–∏</div>
                        <input type="text" name="name"
                               th:value="${oldName != null ? oldName : ''}"
                               placeholder="USA" required minlength="2" maxlength="100">
                    </div>
                    <div>
                        <div class="label">–ó–∞–≥–∞–ª—å–Ω–∞ –¥–æ–ø–æ–º–æ–≥–∞ (USD)</div>
                        <input type="number" name="totalAidUsd"
                               th:value="${oldAid != null ? #numbers.formatDecimal(oldAid, 0, 'NONE', 0, 'NONE') : ''}"
                               placeholder="75000000000" required min="0" step="0.01">
                    </div>
                    <button type="submit">‚ûï –î–æ–¥–∞—Ç–∏ –ö—Ä–∞—ó–Ω—É</button>
                </form>

                <!-- –§–æ—Ä–º–∞ –ø–æ—à—É–∫—É -->
                <form method="get" action="/" style="margin-top: 20px; background: rgba(0,102,255,0.1);">
                    <div>
                        <div class="label">üîç –ü–æ—à—É–∫ –∫—Ä–∞—ó–Ω–∏</div>
                        <input type="text"
                               name="searchCountry"
                               placeholder="–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É –∫—Ä–∞—ó–Ω–∏..."
                               th:value="${searchCountry}">
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button type="submit" style="flex: 1;">–®—É–∫–∞—Ç–∏</button>
                        <a th:href="@{/}" class="edit-btn" style="flex: 1; display: flex; align-items: center; justify-content: center; text-decoration: none;">–°–∫–∏–Ω—É—Ç–∏</a>
                    </div>
                </form>
            </div>

            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ—à—É–∫—É -->
            <div>
                <!-- –ü–æ–∫–∞–∑—É—î–º–æ —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ —î –ø–æ—à—É–∫ -->
                <div th:if="${searchCountry != null and !searchCountry.isEmpty()}">
                    <div style="padding: 10px; background: rgba(0,102,255,0.2); border-radius: 8px; margin-bottom: 15px;">
                        <p style="color: #00ccff; margin: 0; font-weight: bold;">
                            –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ—à—É–∫—É: <span th:text="${countries.size()}">0</span> –∑–∞–ø–∏—Å—ñ–≤
                        </p>
                    </div>

                    <!-- –°–ø–∏—Å–æ–∫ –∑–Ω–∞–π–¥–µ–Ω–∏—Ö –∫—Ä–∞—ó–Ω -->
                    <ul th:if="${!countries.isEmpty()}">
                        <li th:each="country : ${countries}">
                            <div class="item-info">
                                <div class="item-name" th:text="${country.name}">USA</div>
                                <div class="item-details">
                                    –î–æ–ø–æ–º–æ–≥–∞: $<span th:text="${#numbers.formatDecimal(country.totalAidUsd, 0, 'COMMA', 0, 'POINT')}">75,000,000,000</span>
                                </div>
                            </div>
                            <div class="item-actions">
                                <a th:href="@{/editCountry/{id}(id=${country.id})}" class="edit-btn">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏</a>
                                <a th:href="@{/deleteCountry/{id}(id=${country.id})}" class="delete-btn">–í–∏–¥–∞–ª–∏—Ç–∏</a>
                            </div>
                        </li>
                    </ul>

                    <!-- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ -->
                    <div th:if="${countries.isEmpty()}" style="padding: 15px; background: rgba(255,107,107,0.1); border-radius: 8px; text-align: center;">
                        <p style="color: #ff6b6b; margin: 0;">
                            ‚ùå –ö—Ä–∞—ó–Ω –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –∑–∞ –∑–∞–ø–∏—Ç–æ–º "<span th:text="${searchCountry}"></span>"
                        </p>
                    </div>
                </div>

                <!-- –ü—ñ–¥–∫–∞–∑–∫–∞ –∫–æ–ª–∏ –Ω–µ–º–∞—î –ø–æ—à—É–∫—É -->
                <div th:if="${searchCountry == null or searchCountry.isEmpty()}" style="padding: 20px; background: rgba(255,255,255,0.03); border-radius: 8px; text-align: center;">
                    <p style="color: #bbb; margin: 0;">
                        üí° –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –ø–æ—à—É–∫ –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫—Ä–∞—ó–Ω
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== –ü–ï–†–Ü–û–î–ò ==================== -->
    <div class="column">
        <h2>üìÖ –ü–µ—Ä—ñ–æ–¥–∏ –¥–æ–ø–æ–º–æ–≥–∏</h2>

        <div class="content-grid">
            <!-- –§–æ—Ä–º–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è -->
            <div>
                <form action="/addPeriod" method="post">
                    <div>
                        <div class="label">–ù–∞–∑–≤–∞ –ø–µ—Ä—ñ–æ–¥—É</div>
                        <input type="text" name="periodName" placeholder="2022 Q1-Q2" required minlength="2" maxlength="100">
                    </div>
                    <div>
                        <div class="label">–ö—Ä–∞—ó–Ω–∞</div>
                        <select name="countryId" required>
                            <option value="" disabled selected>–û–±–µ—Ä—ñ—Ç—å –∫—Ä–∞—ó–Ω—É</option>
                            <option th:each="c : ${@countryService.getAllCountries()}"
                                    th:value="${c.id}"
                                    th:text="${c.name}">Country</option>
                        </select>
                    </div>
                    <div>
                        <div class="label">–î–∞—Ç–∞ –ø–æ—á–∞—Ç–∫—É</div>
                        <input type="date" name="startDate" required>
                    </div>
                    <div>
                        <div class="label">–î–∞—Ç–∞ –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)</div>
                        <input type="date" name="endDate">
                    </div>
                    <div>
                        <div class="label">–°—É–º–∞ –¥–æ–ø–æ–º–æ–≥–∏ (USD)</div>
                        <input type="number" name="aidAmountUsd" placeholder="15000000000" required min="0" step="0.01">
                    </div>
                    <button type="submit">‚ûï –î–æ–¥–∞—Ç–∏ –ü–µ—Ä—ñ–æ–¥</button>
                </form>

                <!-- –§–æ—Ä–º–∞ –ø–æ—à—É–∫—É -->
                <form method="get" action="/" style="margin-top: 20px; background: rgba(0,102,255,0.1);">
                    <div>
                        <div class="label">üîç –ü–æ—à—É–∫ –ø–µ—Ä—ñ–æ–¥—É</div>
                        <input type="text"
                               name="searchPeriod"
                               placeholder="–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É –ø–µ—Ä—ñ–æ–¥—É –∞–±–æ –∫—Ä–∞—ó–Ω–∏..."
                               th:value="${searchPeriod}">
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button type="submit" style="flex: 1;">–®—É–∫–∞—Ç–∏</button>
                        <a th:href="@{/}" class="edit-btn" style="flex: 1; display: flex; align-items: center; justify-content: center; text-decoration: none;">–°–∫–∏–Ω—É—Ç–∏</a>
                    </div>
                </form>
            </div>

            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ—à—É–∫—É -->
            <div>
                <!-- –ü–æ–∫–∞–∑—É—î–º–æ —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ —î –ø–æ—à—É–∫ -->
                <div th:if="${searchPeriod != null and !searchPeriod.isEmpty()}">
                    <div style="padding: 10px; background: rgba(0,102,255,0.2); border-radius: 8px; margin-bottom: 15px;">
                        <p style="color: #00ccff; margin: 0; font-weight: bold;">
                            –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ—à—É–∫—É: <span th:text="${periods.size()}">0</span> –∑–∞–ø–∏—Å—ñ–≤
                        </p>
                    </div>

                    <!-- –°–ø–∏—Å–æ–∫ –∑–Ω–∞–π–¥–µ–Ω–∏—Ö –ø–µ—Ä—ñ–æ–¥—ñ–≤ -->
                    <ul th:if="${!periods.isEmpty()}">
                        <li th:each="period : ${periods}">
                            <div class="item-info">
                                <div class="item-name" th:text="${period.periodName}">2022 Q1-Q2</div>
                                <div class="item-details">
                                    –ö—Ä–∞—ó–Ω–∞: <span th:text="${period.country.name}">USA</span><br>
                                    –ü–µ—Ä—ñ–æ–¥: <span th:text="${period.startDate}">2022-01-01</span> -
                                    <span th:text="${period.endDate != null ? period.endDate : 'Ongoing'}">2022-06-30</span><br>
                                    –°—É–º–∞: $<span th:text="${#numbers.formatDecimal(period.aidAmountUsd, 0, 'COMMA', 0, 'POINT')}">15,000,000,000</span>
                                </div>
                            </div>
                            <div class="item-actions">
                                <a th:href="@{/editPeriod/{id}(id=${period.id})}" class="edit-btn">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏</a>
                                <a th:href="@{/deletePeriod/{id}(id=${period.id})}" class="delete-btn">–í–∏–¥–∞–ª–∏—Ç–∏</a>
                            </div>
                        </li>
                    </ul>

                    <!-- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ -->
                    <div th:if="${periods.isEmpty()}" style="padding: 15px; background: rgba(255,107,107,0.1); border-radius: 8px; text-align: center;">
                        <p style="color: #ff6b6b; margin: 0;">
                            ‚ùå –ü–µ—Ä—ñ–æ–¥—ñ–≤ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –∑–∞ –∑–∞–ø–∏—Ç–æ–º "<span th:text="${searchPeriod}"></span>"
                        </p>
                    </div>
                </div>

                <!-- –ü—ñ–¥–∫–∞–∑–∫–∞ –∫–æ–ª–∏ –Ω–µ–º–∞—î –ø–æ—à—É–∫—É -->
                <div th:if="${searchPeriod == null or searchPeriod.isEmpty()}" style="padding: 20px; background: rgba(255,255,255,0.03); border-radius: 8px; text-align: center;">
                    <p style="color: #bbb; margin: 0;">
                        üí° –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –ø–æ—à—É–∫ –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø–µ—Ä—ñ–æ–¥—ñ–≤
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== –ó–ë–†–û–Ø ==================== -->
    <div class="column">
        <h2>üî´ –ü–µ—Ä–µ–¥–∞–Ω–∞ –∑–±—Ä–æ—è</h2>

        <div class="content-grid">
            <!-- –§–æ—Ä–º–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è -->
            <div>
                <form action="/addWeapon" method="post">
                    <div>
                        <div class="label">–¢–∏–ø –∑–±—Ä–æ—ó</div>
                        <input type="text" name="weaponType" placeholder="Artillery" required minlength="2" maxlength="100">
                    </div>
                    <div>
                        <div class="label">–ù–∞–∑–≤–∞ –∑–±—Ä–æ—ó</div>
                        <input type="text" name="weaponName" placeholder="M777 Howitzer" required minlength="2" maxlength="200">
                    </div>
                    <div>
                        <div class="label">–ü–µ—Ä—ñ–æ–¥</div>
                        <select name="periodId" required>
                            <option value="" disabled selected>–û–±–µ—Ä—ñ—Ç—å –ø–µ—Ä—ñ–æ–¥</option>
                            <option th:each="p : ${@periodService.getAllPeriods()}"
                                    th:value="${p.id}"
                                    th:text="${p.periodName + ' (' + p.country.name + ')'}">Period</option>
                        </select>
                    </div>
                    <div>
                        <div class="label">–ö—ñ–ª—å–∫—ñ—Å—Ç—å –æ–¥–∏–Ω–∏—Ü—å</div>
                        <input type="number" name="quantity" placeholder="90" required min="1" max="1000000">
                    </div>
                    <div>
                        <div class="label">–í–∞—Ä—Ç—ñ—Å—Ç—å –æ–¥–∏–Ω–∏—Ü—ñ (USD)</div>
                        <input type="number" name="unitCostUsd" placeholder="2500000" required min="0" step="0.01">
                    </div>
                    <div>
                        <div class="label">–ó–∞–≥–∞–ª—å–Ω–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å (USD)</div>
                        <input type="number" name="totalCostUsd" placeholder="225000000" required min="0" step="0.01">
                    </div>
                    <button type="submit">‚ûï –î–æ–¥–∞—Ç–∏ –ó–±—Ä–æ—é</button>
                </form>

                <!-- –§–æ—Ä–º–∞ –ø–æ—à—É–∫—É -->
                <form method="get" action="/" style="margin-top: 20px; background: rgba(0,102,255,0.1);">
                    <div>
                        <div class="label">üîç –ü–æ—à—É–∫ –∑–±—Ä–æ—ó</div>
                        <input type="text"
                               name="searchWeapon"
                               placeholder="–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É –∞–±–æ —Ç–∏–ø –∑–±—Ä–æ—ó..."
                               th:value="${searchWeapon}">
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button type="submit" style="flex: 1;">–®—É–∫–∞—Ç–∏</button>
                        <a th:href="@{/}" class="edit-btn" style="flex: 1; display: flex; align-items: center; justify-content: center; text-decoration: none;">–°–∫–∏–Ω—É—Ç–∏</a>
                    </div>
                </form>
            </div>

            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ—à—É–∫—É -->
            <div>
                <!-- –ü–æ–∫–∞–∑—É—î–º–æ —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ —î –ø–æ—à—É–∫ -->
                <div th:if="${searchWeapon != null and !searchWeapon.isEmpty()}">
                    <div style="padding: 10px; background: rgba(0,102,255,0.2); border-radius: 8px; margin-bottom: 15px;">
                        <p style="color: #00ccff; margin: 0; font-weight: bold;">
                            –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ—à—É–∫—É: <span th:text="${weapons.size()}">0</span> –∑–∞–ø–∏—Å—ñ–≤
                        </p>
                    </div>

                    <!-- –°–ø–∏—Å–æ–∫ –∑–Ω–∞–π–¥–µ–Ω–æ—ó –∑–±—Ä–æ—ó -->
                    <ul th:if="${!weapons.isEmpty()}">
                        <li th:each="weapon : ${weapons}">
                            <div class="item-info">
                                <div class="item-name" th:text="${weapon.weaponName}">M777 Howitzer</div>
                                <div class="item-details">
                                    –¢–∏–ø: <span th:text="${weapon.weaponType}">Artillery</span><br>
                                    –ü–µ—Ä—ñ–æ–¥: <span th:text="${weapon.period.periodName}">2022 Q1-Q2</span><br>
                                    –ö—ñ–ª—å–∫—ñ—Å—Ç—å: <span th:text="${weapon.quantity}">90</span> —à—Ç.<br>
                                    –ó–∞–≥–∞–ª—å–Ω–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å: $<span th:text="${#numbers.formatDecimal(weapon.totalCostUsd, 0, 'COMMA', 0, 'POINT')}">225,000,000</span>
                                </div>
                            </div>
                            <div class="item-actions">
                                <a th:href="@{/editWeapon/{id}(id=${weapon.id})}" class="edit-btn">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏</a>
                                <a th:href="@{/deleteWeapon/{id}(id=${weapon.id})}" class="delete-btn">–í–∏–¥–∞–ª–∏—Ç–∏</a>
                            </div>
                        </li>
                    </ul>

                    <!-- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ -->
                    <div th:if="${weapons.isEmpty()}" style="padding: 15px; background: rgba(255,107,107,0.1); border-radius: 8px; text-align: center;">
                        <p style="color: #ff6b6b; margin: 0;">
                            ‚ùå –ó–±—Ä–æ—ó –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –∑–∞ –∑–∞–ø–∏—Ç–æ–º "<span th:text="${searchWeapon}"></span>"
                        </p>
                    </div>
                </div>

                <!-- –ü—ñ–¥–∫–∞–∑–∫–∞ –∫–æ–ª–∏ –Ω–µ–º–∞—î –ø–æ—à—É–∫—É -->
                <div th:if="${searchWeapon == null or searchWeapon.isEmpty()}" style="padding: 20px; background: rgba(255,255,255,0.03); border-radius: 8px; text-align: center;">
                    <p style="color: #bbb; margin: 0;">
                        üí° –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –ø–æ—à—É–∫ –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–±—Ä–æ—ó
                    </p>
                </div>
            </div>
        </div>
    </div>

</div>

</body>
</html>