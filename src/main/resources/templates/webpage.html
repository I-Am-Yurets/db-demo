<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–∏—Å—Ç–µ–º–∞ –æ–±–ª—ñ–∫—É –≤—ñ–π—Å—å–∫–æ–≤–æ—ó –¥–æ–ø–æ–º–æ–≥–∏</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body>

<h1>üéñÔ∏è –°–∏—Å—Ç–µ–º–∞ –æ–±–ª—ñ–∫—É –≤—ñ–π—Å—å–∫–æ–≤–æ—ó –¥–æ–ø–æ–º–æ–≥–∏</h1>
<p class="subtitle">
    Spring Boot + Spring Data JPA + Hibernate<br>
    <strong>–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∑–∞—Ö–∏—Å—Ç –≤—ñ–¥ SQL Injection —á–µ—Ä–µ–∑ JPA</strong>
</p>

<div class="container">

    <!-- ==================== –ö–†–ê–á–ù–ò-–î–û–ù–û–†–ò ==================== -->
    <div class="column">
        <h2>üåç –ö—Ä–∞—ó–Ω–∏-–¥–æ–Ω–æ—Ä–∏</h2>

        <form action="/addCountry" method="post">
            <div>
                <div class="label">–ù–∞–∑–≤–∞ –∫—Ä–∞—ó–Ω–∏</div>
                <input type="text" name="name" placeholder="USA" required>
            </div>
            <div>
                <div class="label">–ó–∞–≥–∞–ª—å–Ω–∞ –¥–æ–ø–æ–º–æ–≥–∞ (USD)</div>
                <input type="number" name="totalAidUsd" placeholder="75000000000" required>
            </div>
            <button type="submit">–î–æ–¥–∞—Ç–∏ –ö—Ä–∞—ó–Ω—É</button>
        </form>

        <ul>
            <li th:each="country : ${countries}">
                <div class="item-info">
                    <div class="item-name" th:text="${country.name}">USA</div>
                    <div class="item-details">
                        –î–æ–ø–æ–º–æ–≥–∞: $<span th:text="${#numbers.formatDecimal(country.totalAidUsd, 0, 'COMMA', 0, 'POINT')}">75,000,000,000</span>
                    </div>
                </div>
                <a th:href="@{/deleteCountry/{id}(id=${country.id})}" class="delete-btn">–í–∏–¥–∞–ª–∏—Ç–∏</a>
            </li>
        </ul>
    </div>

    <!-- ==================== –ü–ï–†–Ü–û–î–ò –î–û–ü–û–ú–û–ì–ò ==================== -->
    <div class="column">
        <h2>üìÖ –ü–µ—Ä—ñ–æ–¥–∏ –¥–æ–ø–æ–º–æ–≥–∏</h2>

        <form action="/addPeriod" method="post">
            <div>
                <div class="label">–ù–∞–∑–≤–∞ –ø–µ—Ä—ñ–æ–¥—É</div>
                <input type="text" name="periodName" placeholder="2022 Q1-Q2" required>
            </div>
            <div>
                <div class="label">–ö—Ä–∞—ó–Ω–∞</div>
                <select name="countryId" required>
                    <option value="" disabled selected>–û–±–µ—Ä—ñ—Ç—å –∫—Ä–∞—ó–Ω—É</option>
                    <option th:each="country : ${countries}"
                            th:value="${country.id}"
                            th:text="${country.name}">Country</option>
                </select>
            </div>
            <div>
                <div class="label">–î–∞—Ç–∞ –ø–æ—á–∞—Ç–∫—É</div>
                <input type="date" name="startDate" required>
            </div>
            <div>
                <div class="label">–î–∞—Ç–∞ –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)</div>
                <input type="date" name="endDate">
            </div>
            <div>
                <div class="label">–°—É–º–∞ –¥–æ–ø–æ–º–æ–≥–∏ (USD)</div>
                <input type="number" name="aidAmountUsd" placeholder="15000000000" required>
            </div>
            <button type="submit">–î–æ–¥–∞—Ç–∏ –ü–µ—Ä—ñ–æ–¥</button>
        </form>

        <ul>
            <li th:each="period : ${periods}">
                <div class="item-info">
                    <div class="item-name" th:text="${period.periodName}">2022 Q1-Q2</div>
                    <div class="item-details">
                        –ö—Ä–∞—ó–Ω–∞: <span th:text="${period.country.name}">USA</span><br>
                        –ü–µ—Ä—ñ–æ–¥: <span th:text="${period.startDate}">2022-01-01</span> -
                        <span th:text="${period.endDate != null ? period.endDate : 'Ongoing'}">2022-06-30</span><br>
                        –°—É–º–∞: $<span th:text="${#numbers.formatDecimal(period.aidAmountUsd, 0, 'COMMA', 0, 'POINT')}">15,000,000,000</span>
                    </div>
                </div>
                <a th:href="@{/deletePeriod/{id}(id=${period.id})}" class="delete-btn">–í–∏–¥–∞–ª–∏—Ç–∏</a>
            </li>
        </ul>
    </div>

    <!-- ==================== –ü–ï–†–ï–î–ê–ù–ê –ó–ë–†–û–Ø ==================== -->
    <div class="column">
        <h2>üî´ –ü–µ—Ä–µ–¥–∞–Ω–∞ –∑–±—Ä–æ—è</h2>

        <form action="/addWeapon" method="post">
            <div>
                <div class="label">–¢–∏–ø –∑–±—Ä–æ—ó</div>
                <input type="text" name="weaponType" placeholder="Artillery" required>
            </div>
            <div>
                <div class="label">–ù–∞–∑–≤–∞ –∑–±—Ä–æ—ó</div>
                <input type="text" name="weaponName" placeholder="M777 Howitzer" required>
            </div>
            <div>
                <div class="label">–ü–µ—Ä—ñ–æ–¥</div>
                <select name="periodId" required>
                    <option value="" disabled selected>–û–±–µ—Ä—ñ—Ç—å –ø–µ—Ä—ñ–æ–¥</option>
                    <option th:each="period : ${periods}"
                            th:value="${period.id}"
                            th:text="${period.periodName + ' (' + period.country.name + ')'}">Period</option>
                </select>
            </div>
            <div>
                <div class="label">–ö—ñ–ª—å–∫—ñ—Å—Ç—å –æ–¥–∏–Ω–∏—Ü—å</div>
                <input type="number" name="quantity" placeholder="90" required>
            </div>
            <div>
                <div class="label">–í–∞—Ä—Ç—ñ—Å—Ç—å –æ–¥–∏–Ω–∏—Ü—ñ (USD)</div>
                <input type="number" name="unitCostUsd" placeholder="2500000" required>
            </div>
            <div>
                <div class="label">–ó–∞–≥–∞–ª—å–Ω–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å (USD)</div>
                <input type="number" name="totalCostUsd" placeholder="225000000" required>
            </div>
            <button type="submit">–î–æ–¥–∞—Ç–∏ –ó–±—Ä–æ—é</button>
        </form>

        <ul>
            <li th:each="weapon : ${weapons}">
                <div class="item-info">
                    <div class="item-name" th:text="${weapon.weaponName}">M777 Howitzer</div>
                    <div class="item-details">
                        –¢–∏–ø: <span th:text="${weapon.weaponType}">Artillery</span><br>
                        –ü–µ—Ä—ñ–æ–¥: <span th:text="${weapon.period.periodName}">2022 Q1-Q2</span><br>
                        –ö—ñ–ª—å–∫—ñ—Å—Ç—å: <span th:text="${weapon.quantity}">90</span> —à—Ç.<br>
                        –ó–∞–≥–∞–ª—å–Ω–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å: $<span th:text="${#numbers.formatDecimal(weapon.totalCostUsd, 0, 'COMMA', 0, 'POINT')}">225,000,000</span>
                    </div>
                </div>
                <a th:href="@{/deleteWeapon/{id}(id=${weapon.id})}" class="delete-btn">–í–∏–¥–∞–ª–∏—Ç–∏</a>
            </li>
        </ul>
    </div>

</div>

</body>
</html>