<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–∏—Å—Ç–µ–º–∞ –æ–±–ª—ñ–∫—É –≤—ñ–π—Å—å–∫–æ–≤–æ—ó –¥–æ–ø–æ–º–æ–≥–∏</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body>

<h1>üéñÔ∏è –°–∏—Å—Ç–µ–º–∞ –æ–±–ª—ñ–∫—É –≤—ñ–π—Å—å–∫–æ–≤–æ—ó –¥–æ–ø–æ–º–æ–≥–∏</h1>
<p class="subtitle">
    Spring Boot + Spring Data JPA + Hibernate<br>
    <strong>–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∑–∞—Ö–∏—Å—Ç –≤—ñ–¥ SQL Injection —á–µ—Ä–µ–∑ JPA</strong>
</p>

<div style="text-align: center; margin-bottom: 20px;">
    <a th:href="@{/viewAll}"
       class="edit-btn"
       style="font-size: 16px; padding: 10px 20px; text-transform: uppercase; font-weight: bold; display: inline-block;">
        üîç –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –≤—Å—ñ –∑–∞–ø–∏—Å–∏ (–†–µ–∂–∏–º Read)
    </a>
</div>

<div th:if="${error}" style="background: rgba(255,107,107,0.2); padding: 15px; border-radius: 8px; margin: 0 auto 20px; max-width: 1000px; border: 1px solid rgba(255,107,107,0.5);">
    <p style="color: #ff6b6b; margin: 0;" th:utext="${error}"></p>
</div>
<div th:if="${message}" style="background: rgba(144,238,144,0.2); padding: 15px; border-radius: 8px; margin: 0 auto 20px; max-width: 1000px; border: 1px solid rgba(144,238,144,0.5);">
    <p style="color: #90ee90; margin: 0;" th:text="${message}"></p>
</div>

<div class="container-centered">

    <!-- ==================== –ö–†–ê–á–ù–ò ==================== -->
    <div class="column">
        <h2>üåç –ö—Ä–∞—ó–Ω–∏-–¥–æ–Ω–æ—Ä–∏</h2>

        <div class="content-grid">
            <!-- –§–æ—Ä–º–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è -->
            <div>
                <form action="/addCountry" method="post">
                    <div>
                        <div class="label">–ù–∞–∑–≤–∞ –∫—Ä–∞—ó–Ω–∏</div>
                        <input type="text" name="name"
                               th:value="${oldName != null ? oldName : ''}"
                               placeholder="USA" required minlength="2" maxlength="100">
                    </div>
                    <div>
                        <div class="label">–ó–∞–≥–∞–ª—å–Ω–∞ –¥–æ–ø–æ–º–æ–≥–∞ (USD)</div>
                        <input type="number" name="totalAidUsd"
                               th:value="${oldAid != null ? #numbers.formatDecimal(oldAid, 0, 'NONE', 0, 'NONE') : ''}"
                               placeholder="75000000000" required min="0" step="0.01">
                    </div>
                    <button type="submit">‚ûï –î–æ–¥–∞—Ç–∏ –ö—Ä–∞—ó–Ω—É</button>
                </form>

                <!-- –§–æ—Ä–º–∞ –ø–æ—à—É–∫—É -->
                <form method="get" action="/" style="margin-top: 20px; background: rgba(0,102,255,0.1);">
                    <div>
                        <div class="label">üîç –ü–æ—à—É–∫ –∫—Ä–∞—ó–Ω–∏</div>
                        <input type="text"
                               name="searchCountry"
                               placeholder="–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É –∫—Ä–∞—ó–Ω–∏..."
                               th:value="${searchCountry}">
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button type="submit" style="flex: 1;">–®—É–∫–∞—Ç–∏</button>
                        <a th:href="@{/}" class="edit-btn" style="flex: 1; display: flex; align-items: center; justify-content: center; text-decoration: none;">–°–∫–∏–Ω—É—Ç–∏</a>
                    </div>
                </form>
            </div>

            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ—à—É–∫—É -->
            <div>
                <!-- –ü–æ–∫–∞–∑—É—î–º–æ —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ —î –ø–æ—à—É–∫ -->
                <div th:if="${searchCountry != null and !searchCountry.isEmpty()}">
                    <div style="padding: 10px; background: rgba(0,102,255,0.2); border-radius: 8px; margin-bottom: 15px;">
                        <p style="color: #00ccff; margin: 0; font-weight: bold;">
                            –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ—à—É–∫—É: <span th:text="${countries.size()}">0</span> –∑–∞–ø–∏—Å—ñ–≤
                        </p>
                    </div>

                    <!-- –°–ø–∏—Å–æ–∫ –∑–Ω–∞–π–¥–µ–Ω–∏—Ö –∫—Ä–∞—ó–Ω -->
                    <ul th:if="${!countries.isEmpty()}">
                        <li th:each="country : ${countries}">
                            <div class="item-info">
                                <div class="item-name" th:text="${country.name}">USA</div>
                                <div class="item-details">
                                    –î–æ–ø–æ–º–æ–≥–∞: $<span th:text="${#numbers.formatDecimal(country.totalAidUsd, 0, 'COMMA', 0, 'POINT')}">75,000,000,000</span>
                                </div>
                            </div>
                            <div class="item-actions">
                                <a th:href="@{/editCountry/{id}(id=${country.id})}" class="edit-btn">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏</a>
                                <a th:href="@{/deleteCountry/{id}(id=${country.id})}" class="delete-btn">–í–∏–¥–∞–ª–∏—Ç–∏</a>
                            </div>
                        </li>
                    </ul>

                    <!-- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ -->
                    <div th:if="${countries.isEmpty()}" style="padding: 15px; background: rgba(255,107,107,0.1); border-radius: 8px; text-align: center;">
                        <p style="color: #ff6b6b; margin: 0;">
                            ‚ùå –ö—Ä–∞—ó–Ω –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –∑–∞ –∑–∞–ø–∏—Ç–æ–º "<span th:text="${searchCountry}"></span>"
                        </p>
                    </div>
                </div>

                <!-- –ü—ñ–¥–∫–∞–∑–∫–∞ –∫–æ–ª–∏ –Ω–µ–º–∞—î –ø–æ—à—É–∫—É -->
                <div th:if="${searchCountry == null or searchCountry.isEmpty()}" style="padding: 20px; background: rgba(255,255,255,0.03); border-radius: 8px; text-align: center;">
                    <p style="color: #bbb; margin: 0;">
                        üí° –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –ø–æ—à—É–∫ –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫—Ä–∞—ó–Ω
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== –ü–ï–†–Ü–û–î–ò ==================== -->
    <div class="column">
        <h2>üìÖ –ü–µ—Ä—ñ–æ–¥–∏ –¥–æ–ø–æ–º–æ–≥–∏</h2>

        <div class="content-grid">
            <!-- –§–æ—Ä–º–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è -->
            <div>
                <form action="/addPeriod" method="post">
                    <div>
                        <div class="label">–ù–∞–∑–≤–∞ –ø–µ—Ä—ñ–æ–¥—É</div>
                        <input type="text" name="periodName" placeholder="2022 Q1-Q2" required minlength="2" maxlength="100">
                    </div>
                    <div>
                        <div class="label">–ö—Ä–∞—ó–Ω–∞</div>
                        <select name="countryId" required>
                            <option value="" disabled selected>–û–±–µ—Ä—ñ—Ç—å –∫—Ä–∞—ó–Ω—É</option>
                            <option th:each="c : ${@countryService.getAllCountries()}"
                                    th:value="${c.id}"
                                    th:text="${c.name}">Country</option>
                        </select>
                    </div>
                    <div>
                        <div class="label">–î–∞—Ç–∞ –ø–æ—á–∞—Ç–∫—É</div>
                        <input type="date" name="startDate" required>
                    </div>
                    <div>
                        <div class="label">–î–∞—Ç–∞ –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)</div>
                        <input type="date" name="endDate">
                    </div>
                    <div>
                        <div class="label">–°—É–º–∞ –¥–æ–ø–æ–º–æ–≥–∏ (USD)</div>
                        <input type="number" name="aidAmountUsd" placeholder="15000000000" required min="0" step="0.01">
                    </div>
                    <button type="submit">‚ûï –î–æ–¥–∞—Ç–∏ –ü–µ—Ä—ñ–æ–¥</button>
                </form>

                <!-- –§–æ—Ä–º–∞ –ø–æ—à—É–∫—É -->
                <form method="get" action="/" style="margin-top: 20px; background: rgba(0,102,255,0.1);">
                    <div>
                        <div class="label">üîç –ü–æ—à—É–∫ –ø–µ—Ä—ñ–æ–¥—É</div>
                        <input type="text"
                               name="searchPeriod"
                               placeholder="–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É –ø–µ—Ä—ñ–æ–¥—É –∞–±–æ –∫—Ä–∞—ó–Ω–∏..."
                               th:value="${searchPeriod}">
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button type="submit" style="flex: 1;">–®—É–∫–∞—Ç–∏</button>
                        <a th:href="@{/}" class="edit-btn" style="flex: 1; display: flex; align-items: center; justify-content: center; text-decoration: none;">–°–∫–∏–Ω—É—Ç–∏</a>
                    </div>
                </form>
            </div>

            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ—à—É–∫—É -->
            <div>
                <!-- –ü–æ–∫–∞–∑—É—î–º–æ —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ —î –ø–æ—à—É–∫ -->
                <div th:if="${searchPeriod != null and !searchPeriod.isEmpty()}">
                    <div style="padding: 10px; background: rgba(0,102,255,0.2); border-radius: 8px; margin-bottom: 15px;">
                        <p style="color: #00ccff; margin: 0; font-weight: bold;">
                            –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ—à—É–∫—É: <span th:text="${periods.size()}">0</span> –∑–∞–ø–∏—Å—ñ–≤
                        </p>
                    </div>

                    <!-- –°–ø–∏—Å–æ–∫ –∑–Ω–∞–π–¥–µ–Ω–∏—Ö –ø–µ—Ä—ñ–æ–¥—ñ–≤ -->
                    <ul th:if="${!periods.isEmpty()}">
                        <li th:each="period : ${periods}">
                            <div class="item-info">
                                <div class="item-name" th:text="${period.periodName}">2022 Q1-Q2</div>
                                <div class="item-details">
                                    –ö—Ä–∞—ó–Ω–∞: <span th:text="${period.country.name}">USA</span><br>
                                    –ü–µ—Ä—ñ–æ–¥: <span th:text="${period.startDate}">2022-01-01</span> -
                                    <span th:text="${period.endDate != null ? period.endDate : 'Ongoing'}">2022-06-30</span><br>
                                    –°—É–º–∞: $<span th:text="${#numbers.formatDecimal(period.aidAmountUsd, 0, 'COMMA', 0, 'POINT')}">15,000,000,000</span>
                                </div>
                            </div>
                            <div class="item-actions">
                                <a th:href="@{/editPeriod/{id}(id=${period.id})}" class="edit-btn">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏</a>
                                <a th:href="@{/deletePeriod/{id}(id=${period.id})}" class="delete-btn">–í–∏–¥–∞–ª–∏—Ç–∏</a>
                            </div>
                        </li>
                    </ul>

                    <!-- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ -->
                    <div th:if="${periods.isEmpty()}" style="padding: 15px; background: rgba(255,107,107,0.1); border-radius: 8px; text-align: center;">
                        <p style="color: #ff6b6b; margin: 0;">
                            ‚ùå –ü–µ—Ä—ñ–æ–¥—ñ–≤ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –∑–∞ –∑–∞–ø–∏—Ç–æ–º "<span th:text="${searchPeriod}"></span>"
                        </p>
                    </div>
                </div>

                <!-- –ü—ñ–¥–∫–∞–∑–∫–∞ –∫–æ–ª–∏ –Ω–µ–º–∞—î –ø–æ—à—É–∫—É -->
                <div th:if="${searchPeriod == null or searchPeriod.isEmpty()}" style="padding: 20px; background: rgba(255,255,255,0.03); border-radius: 8px; text-align: center;">
                    <p style="color: #bbb; margin: 0;">
                        üí° –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –ø–æ—à—É–∫ –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø–µ—Ä—ñ–æ–¥—ñ–≤
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== –ó–ë–†–û–Ø ==================== -->
    <div class="column">
        <h2>üî´ –ü–µ—Ä–µ–¥–∞–Ω–∞ –∑–±—Ä–æ—è</h2>

        <div class="content-grid">
            <!-- –§–æ—Ä–º–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è -->
            <div>
                <form action="/addWeapon" method="post">
                    <div>
                        <div class="label">–¢–∏–ø –∑–±—Ä–æ—ó</div>
                        <input type="text" name="weaponType" placeholder="Artillery" required minlength="2" maxlength="100">
                    </div>
                    <div>
                        <div class="label">–ù–∞–∑–≤–∞ –∑–±—Ä–æ—ó</div>
                        <input type="text" name="weaponName" placeholder="M777 Howitzer" required minlength="2" maxlength="200">
                    </div>
                    <div>
                        <div class="label">–ü–µ—Ä—ñ–æ–¥</div>
                        <select name="periodId" required>
                            <option value="" disabled selected>–û–±–µ—Ä—ñ—Ç—å –ø–µ—Ä—ñ–æ–¥</option>
                            <option th:each="p : ${@periodService.getAllPeriods()}"
                                    th:value="${p.id}"
                                    th:text="${p.periodName + ' (' + p.country.name + ')'}">Period</option>
                        </select>
                    </div>
                    <div>
                        <div class="label">–ö—ñ–ª—å–∫—ñ—Å—Ç—å –æ–¥–∏–Ω–∏—Ü—å</div>
                        <input type="number" name="quantity" placeholder="90" required min="1" max="1000000">
                    </div>
                    <div>
                        <div class="label">–í–∞—Ä—Ç—ñ—Å—Ç—å –æ–¥–∏–Ω–∏—Ü—ñ (USD)</div>
                        <input type="number" name="unitCostUsd" placeholder="2500000" required min="0" step="0.01">
                    </div>
                    <div>
                        <div class="label">–ó–∞–≥–∞–ª—å–Ω–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å (USD)</div>
                        <input type="number" name="totalCostUsd" placeholder="225000000" required min="0" step="0.01">
                    </div>
                    <button type="submit">‚ûï –î–æ–¥–∞—Ç–∏ –ó–±—Ä–æ—é</button>
                </form>

                <!-- –§–æ—Ä–º–∞ –ø–æ—à—É–∫—É -->
                <form method="get" action="/" style="margin-top: 20px; background: rgba(0,102,255,0.1);">
                    <div>
                        <div class="label">üîç –ü–æ—à—É–∫ –∑–±—Ä–æ—ó</div>
                        <input type="text"
                               name="searchWeapon"
                               placeholder="–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É –∞–±–æ —Ç–∏–ø –∑–±—Ä–æ—ó..."
                               th:value="${searchWeapon}">
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button type="submit" style="flex: 1;">–®—É–∫–∞—Ç–∏</button>
                        <a th:href="@{/}" class="edit-btn" style="flex: 1; display: flex; align-items: center; justify-content: center; text-decoration: none;">–°–∫–∏–Ω—É—Ç–∏</a>
                    </div>
                </form>
            </div>

            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ—à—É–∫—É -->
            <div>
                <!-- –ü–æ–∫–∞–∑—É—î–º–æ —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ —î –ø–æ—à—É–∫ -->
                <div th:if="${searchWeapon != null and !searchWeapon.isEmpty()}">
                    <div style="padding: 10px; background: rgba(0,102,255,0.2); border-radius: 8px; margin-bottom: 15px;">
                        <p style="color: #00ccff; margin: 0; font-weight: bold;">
                            –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ—à—É–∫—É: <span th:text="${weapons.size()}">0</span> –∑–∞–ø–∏—Å—ñ–≤
                        </p>
                    </div>

                    <!-- –°–ø–∏—Å–æ–∫ –∑–Ω–∞–π–¥–µ–Ω–æ—ó –∑–±—Ä–æ—ó -->
                    <ul th:if="${!weapons.isEmpty()}">
                        <li th:each="weapon : ${weapons}">
                            <div class="item-info">
                                <div class="item-name" th:text="${weapon.weaponName}">M777 Howitzer</div>
                                <div class="item-details">
                                    –¢–∏–ø: <span th:text="${weapon.weaponType}">Artillery</span><br>
                                    –ü–µ—Ä—ñ–æ–¥: <span th:text="${weapon.period.periodName}">2022 Q1-Q2</span><br>
                                    –ö—ñ–ª—å–∫—ñ—Å—Ç—å: <span th:text="${weapon.quantity}">90</span> —à—Ç.<br>
                                    –ó–∞–≥–∞–ª—å–Ω–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å: $<span th:text="${#numbers.formatDecimal(weapon.totalCostUsd, 0, 'COMMA', 0, 'POINT')}">225,000,000</span>
                                </div>
                            </div>
                            <div class="item-actions">
                                <a th:href="@{/editWeapon/{id}(id=${weapon.id})}" class="edit-btn">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏</a>
                                <a th:href="@{/deleteWeapon/{id}(id=${weapon.id})}" class="delete-btn">–í–∏–¥–∞–ª–∏—Ç–∏</a>
                            </div>
                        </li>
                    </ul>

                    <!-- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ -->
                    <div th:if="${weapons.isEmpty()}" style="padding: 15px; background: rgba(255,107,107,0.1); border-radius: 8px; text-align: center;">
                        <p style="color: #ff6b6b; margin: 0;">
                            ‚ùå –ó–±—Ä–æ—ó –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –∑–∞ –∑–∞–ø–∏—Ç–æ–º "<span th:text="${searchWeapon}"></span>"
                        </p>
                    </div>
                </div>

                <!-- –ü—ñ–¥–∫–∞–∑–∫–∞ –∫–æ–ª–∏ –Ω–µ–º–∞—î –ø–æ—à—É–∫—É -->
                <div th:if="${searchWeapon == null or searchWeapon.isEmpty()}" style="padding: 20px; background: rgba(255,255,255,0.03); border-radius: 8px; text-align: center;">
                    <p style="color: #bbb; margin: 0;">
                        üí° –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –ø–æ—à—É–∫ –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–±—Ä–æ—ó
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== –î–û–ù–û–†–ò ==================== -->
    <div class="column">
        <h2>üè¢ –î–æ–Ω–æ—Ä–∏ (–û—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—ó)</h2>

        <div class="content-grid">
            <!-- –§–æ—Ä–º–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è -->
            <div>
                <form th:action="@{/addDonor}" method="post">
                    <div>
                        <div class="label">–ù–∞–∑–≤–∞ –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—ó</div>
                        <input type="text" name="organizationName" placeholder="Pentagon" required minlength="2" maxlength="200">
                    </div>

                    <div>
                        <div class="label">–¢–∏–ø –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—ó</div>
                        <select name="organizationType" required>
                            <option value="" disabled selected>–û–±–µ—Ä—ñ—Ç—å —Ç–∏–ø</option>
                            <option value="—É—Ä—è–¥–æ–≤–∞">–£—Ä—è–¥–æ–≤–∞</option>
                            <option value="–º—ñ–∂–Ω–∞—Ä–æ–¥–Ω–∞">–ú—ñ–∂–Ω–∞—Ä–æ–¥–Ω–∞</option>
                            <option value="–ø—Ä–∏–≤–∞—Ç–Ω–∞">–ü—Ä–∏–≤–∞—Ç–Ω–∞</option>
                        </select>
                    </div>

                    <div>
                        <div class="label">–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è</div>
                        <input type="text" name="contactInfo" placeholder="contact@example.com" maxlength="200">
                    </div>

                    <div>
                        <div class="label">–ö—Ä–∞—ó–Ω–∞</div>
                        <select name="countryId" required>
                            <option value="" disabled selected>–û–±–µ—Ä—ñ—Ç—å –∫—Ä–∞—ó–Ω—É</option>
                            <option th:each="country : ${@countryService.getAllCountries()}"
                                    th:value="${country.id}"
                                    th:text="${country.name}">Country</option>
                        </select>
                    </div>

                    <button type="submit">‚ûï –î–æ–¥–∞—Ç–∏ –î–æ–Ω–æ—Ä–∞</button>
                </form>

                <!-- –§–æ—Ä–º–∞ –ø–æ—à—É–∫—É -->
                <form method="get" action="/" style="margin-top: 20px; background: rgba(0,102,255,0.1);">
                    <div>
                        <div class="label">üîç –ü–æ—à—É–∫ –¥–æ–Ω–æ—Ä–∞</div>
                        <input type="text"
                               name="searchDonor"
                               placeholder="–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—ó –∞–±–æ —Ç–∏–ø..."
                               th:value="${searchDonor}">
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button type="submit" style="flex: 1;">–®—É–∫–∞—Ç–∏</button>
                        <a th:href="@{/}" class="edit-btn" style="flex: 1; display: flex; align-items: center; justify-content: center; text-decoration: none;">–°–∫–∏–Ω—É—Ç–∏</a>
                    </div>
                </form>
            </div>

            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ—à—É–∫—É -->
            <div>
                <!-- –ü–æ–∫–∞–∑—É—î–º–æ —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ —î –ø–æ—à—É–∫ -->
                <div th:if="${searchDonor != null and !searchDonor.isEmpty()}">
                    <div style="padding: 10px; background: rgba(0,102,255,0.2); border-radius: 8px; margin-bottom: 15px;">
                        <p style="color: #00ccff; margin: 0; font-weight: bold;">
                            –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ—à—É–∫—É: <span th:text="${donors.size()}">0</span> –∑–∞–ø–∏—Å—ñ–≤
                        </p>
                    </div>

                    <!-- –°–ø–∏—Å–æ–∫ –∑–Ω–∞–π–¥–µ–Ω–∏—Ö –¥–æ–Ω–æ—Ä—ñ–≤ -->
                    <ul th:if="${!donors.isEmpty()}">
                        <li th:each="donor : ${donors}">
                            <div class="item-info">
                                <div class="item-name" th:text="${donor.organizationName}">Pentagon</div>
                                <div class="item-details">
                                    –¢–∏–ø: <span th:text="${donor.organizationType}">—É—Ä—è–¥–æ–≤–∞</span><br>
                                    –ö—Ä–∞—ó–Ω–∞: <span th:text="${donor.country.name}">USA</span><br>
                                    <span th:if="${donor.contactInfo != null and !donor.contactInfo.isEmpty()}">
                                        –ö–æ–Ω—Ç–∞–∫—Ç: <span th:text="${donor.contactInfo}">contact@example.com</span>
                                    </span>
                                </div>
                            </div>

                            <div class="item-actions" sec:authorize="hasAuthority('ADMIN')">
                                <a th:href="@{/editDonor/{id}(id=${donor.id})}" class="edit-btn">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏</a>

                                <a th:href="@{/deleteDonor/{id}(id=${donor.id})}" class="delete-btn">–í–∏–¥–∞–ª–∏—Ç–∏</a>
                            </div>
                        </li>
                    </ul>

                    <!-- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ -->
                    <div th:if="${donors.isEmpty()}" style="padding: 15px; background: rgba(255,107,107,0.1); border-radius: 8px; text-align: center;">
                        <p style="color: #ff6b6b; margin: 0;">
                            ‚ùå –î–æ–Ω–æ—Ä—ñ–≤ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –∑–∞ –∑–∞–ø–∏—Ç–æ–º "<span th:text="${searchDonor}"></span>"
                        </p>
                    </div>
                </div>

                <!-- –ü—ñ–¥–∫–∞–∑–∫–∞ –∫–æ–ª–∏ –Ω–µ–º–∞—î –ø–æ—à—É–∫—É -->
                <div th:if="${searchDonor == null or searchDonor.isEmpty()}" style="padding: 20px; background: rgba(255,255,255,0.03); border-radius: 8px; text-align: center;">
                    <p style="color: #bbb; margin: 0;">
                        üí° –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –ø–æ—à—É–∫ –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–æ–Ω–æ—Ä—ñ–≤
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== –ü–û–°–¢–ê–í–ö–ò ==================== -->
    <div class="column">
        <h2>üì¶ –ü–æ—Å—Ç–∞–≤–∫–∏ –∑–±—Ä–æ—ó</h2>

        <div class="content-grid">
            <!-- –§–æ—Ä–º–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è -->
            <div>
                <form th:action="@{/addDelivery}" method="post">
                    <div>
                        <div class="label">–ó–±—Ä–æ—è</div>
                        <select name="weaponId" required>
                            <option value="" disabled selected>–û–±–µ—Ä—ñ—Ç—å –∑–±—Ä–æ—é</option>
                            <option th:each="weapon : ${@weaponService.getAllWeapons()}"
                                    th:value="${weapon.id}"
                                    th:text="${weapon.weaponName + ' (' + weapon.weaponType + ')'}">Weapon</option>
                        </select>
                    </div>

                    <div>
                        <div class="label">–î–æ–Ω–æ—Ä</div>
                        <select name="donorId" required>
                            <option value="" disabled selected>–û–±–µ—Ä—ñ—Ç—å –¥–æ–Ω–æ—Ä–∞</option>
                            <option th:each="donor : ${@donorService.getAllDonors()}"
                                    th:value="${donor.id}"
                                    th:text="${donor.organizationName + ' (' + donor.country.name + ')'}">Donor</option>
                        </select>
                    </div>

                    <div>
                        <div class="label">–î–∞—Ç–∞ –ø–æ—Å—Ç–∞–≤–∫–∏</div>
                        <input type="date" name="deliveryDate" required>
                    </div>

                    <div>
                        <div class="label">–ö—ñ–ª—å–∫—ñ—Å—Ç—å –æ–¥–∏–Ω–∏—Ü—å</div>
                        <input type="number" name="quantityDelivered" placeholder="50" required min="1">
                    </div>

                    <div>
                        <div class="label">–°—Ç–∞—Ç—É—Å</div>
                        <select name="deliveryStatus" required>
                            <option value="" disabled selected>–û–±–µ—Ä—ñ—Ç—å —Å—Ç–∞—Ç—É—Å</option>
                            <option value="planned">–ó–∞–ø–ª–∞–Ω–æ–≤–∞–Ω–æ</option>
                            <option value="in_transit">–£ –¥–æ—Ä–æ–∑—ñ</option>
                            <option value="delivered">–î–æ—Å—Ç–∞–≤–ª–µ–Ω–æ</option>
                        </select>
                    </div>

                    <div>
                        <div class="label">–ù–æ–º–µ—Ä –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è</div>
                        <input type="text" name="trackingNumber" placeholder="USA-001" maxlength="100">
                    </div>

                    <button type="submit">‚ûï –î–æ–¥–∞—Ç–∏ –ü–æ—Å—Ç–∞–≤–∫—É</button>
                </form>

                <!-- –§–æ—Ä–º–∞ –ø–æ—à—É–∫—É -->
                <form method="get" action="/" style="margin-top: 20px; background: rgba(0,102,255,0.1);">
                    <div>
                        <div class="label">üîç –ü–æ—à—É–∫ –ø–æ—Å—Ç–∞–≤–∫–∏</div>
                        <input type="text"
                               name="searchDelivery"
                               placeholder="–ó–±—Ä–æ—è, –¥–æ–Ω–æ—Ä –∞–±–æ —Å—Ç–∞—Ç—É—Å..."
                               th:value="${searchDelivery}">
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button type="submit" style="flex: 1;">–®—É–∫–∞—Ç–∏</button>
                        <a th:href="@{/}" class="edit-btn" style="flex: 1; display: flex; align-items: center; justify-content: center; text-decoration: none;">–°–∫–∏–Ω—É—Ç–∏</a>
                    </div>
                </form>
            </div>

            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ—à—É–∫—É -->
            <div>
                <!-- –ü–æ–∫–∞–∑—É—î–º–æ —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ —î –ø–æ—à—É–∫ -->
                <div th:if="${searchDelivery != null and !searchDelivery.isEmpty()}">
                    <div style="padding: 10px; background: rgba(0,102,255,0.2); border-radius: 8px; margin-bottom: 15px;">
                        <p style="color: #00ccff; margin: 0; font-weight: bold;">
                            –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ—à—É–∫—É: <span th:text="${deliveries.size()}">0</span> –∑–∞–ø–∏—Å—ñ–≤
                        </p>
                    </div>

                    <!-- –°–ø–∏—Å–æ–∫ –∑–Ω–∞–π–¥–µ–Ω–∏—Ö –ø–æ—Å—Ç–∞–≤–æ–∫ -->
                    <ul th:if="${!deliveries.isEmpty()}">
                        <li th:each="delivery : ${deliveries}">
                            <div class="item-info">
                                <div class="item-name">
                                    <span th:text="${delivery.quantityDelivered}">50</span> –æ–¥.
                                    <span th:text="${delivery.weapon.weaponName}">M777</span>
                                </div>
                                <div class="item-details">
                                    –î–æ–Ω–æ—Ä: <span th:text="${delivery.donor.organizationName}">Pentagon</span><br>
                                    –î–∞—Ç–∞: <span th:text="${delivery.deliveryDate}">2022-03-15</span><br>
                                    –°—Ç–∞—Ç—É—Å:
                                    <span th:if="${delivery.deliveryStatus == 'planned'}" style="color: #ffc107;">‚è≥ –ó–∞–ø–ª–∞–Ω–æ–≤–∞–Ω–æ</span>
                                    <span th:if="${delivery.deliveryStatus == 'in_transit'}" style="color: #00ccff;">üöö –£ –¥–æ—Ä–æ–∑—ñ</span>
                                    <span th:if="${delivery.deliveryStatus == 'delivered'}" style="color: #90ee90;">‚úÖ –î–æ—Å—Ç–∞–≤–ª–µ–Ω–æ</span>
                                    <br>
                                    <span th:if="${delivery.trackingNumber != null and !delivery.trackingNumber.isEmpty()}">
                                        –¢—Ä–µ–∫—ñ–Ω–≥: <span th:text="${delivery.trackingNumber}">USA-001</span>
                                    </span>
                                </div>
                            </div>

                            <div class="item-actions" sec:authorize="hasAuthority('ADMIN')">
                                <a th:href="@{/editDelivery/{id}(id=${delivery.id})}" class="edit-btn">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏</a>
                                <a th:href="@{/deleteDelivery/{id}(id=${delivery.id})}" class="delete-btn">–í–∏–¥–∞–ª–∏—Ç–∏</a>
                            </div>
                        </li>
                    </ul>

                    <!-- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ -->
                    <div th:if="${deliveries.isEmpty()}" style="padding: 15px; background: rgba(255,107,107,0.1); border-radius: 8px; text-align: center;">
                        <p style="color: #ff6b6b; margin: 0;">
                            ‚ùå –ü–æ—Å—Ç–∞–≤–æ–∫ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –∑–∞ –∑–∞–ø–∏—Ç–æ–º "<span th:text="${searchDelivery}"></span>"
                        </p>
                    </div>
                </div>

                <!-- –ü—ñ–¥–∫–∞–∑–∫–∞ –∫–æ–ª–∏ –Ω–µ–º–∞—î –ø–æ—à—É–∫—É -->
                <div th:if="${searchDelivery == null or searchDelivery.isEmpty()}" style="padding: 20px; background: rgba(255,255,255,0.03); border-radius: 8px; text-align: center;">
                    <p style="color: #bbb; margin: 0;">
                        üí° –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –ø–æ—à—É–∫ –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø–æ—Å—Ç–∞–≤–æ–∫
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== –ó–ê–ü–ò–¢–ò –ù–ê –î–û–ü–û–ú–û–ì–£ ==================== -->
    <div class="column">
        <h2>üìã –ó–∞–ø–∏—Ç–∏ –Ω–∞ –≤—ñ–π—Å—å–∫–æ–≤—É –¥–æ–ø–æ–º–æ–≥—É</h2>

        <div class="content-grid">
            <!-- –§–æ—Ä–º–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è -->
            <div>
                <form th:action="@{/addRequest}" method="post">
                    <div>
                        <div class="label">–¢–∏–ø –∑–±—Ä–æ—ó</div>
                        <select name="weaponType" required>
                            <option value="" disabled selected>–û–±–µ—Ä—ñ—Ç—å —Ç–∏–ø</option>
                            <option value="Artillery">Artillery</option>
                            <option value="Air Defense">Air Defense</option>
                            <option value="Vehicles">Vehicles</option>
                            <option value="Ammunition">Ammunition</option>
                            <option value="Aircraft">Aircraft</option>
                        </select>
                    </div>

                    <div>
                        <div class="label">–ù–∞–∑–≤–∞ –∑–±—Ä–æ—ó</div>
                        <input type="text" name="weaponName" placeholder="M777 Howitzer, Leopard 2..." required minlength="2" maxlength="200">
                    </div>

                    <div>
                        <div class="label">–ö—ñ–ª—å–∫—ñ—Å—Ç—å –æ–¥–∏–Ω–∏—Ü—å</div>
                        <input type="number" name="requestedQuantity" placeholder="100" required min="1" max="100000">
                    </div>

                    <div>
                        <div class="label">–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç</div>
                        <select name="priority" required>
                            <option value="" disabled selected>–û–±–µ—Ä—ñ—Ç—å –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç</option>
                            <option value="URGENT">üî¥ URGENT (–¢–µ—Ä–º—ñ–Ω–æ–≤–æ)</option>
                            <option value="HIGH">üü† HIGH (–í–∏—Å–æ–∫–∏–π)</option>
                            <option value="MEDIUM">üü° MEDIUM (–°–µ—Ä–µ–¥–Ω—ñ–π)</option>
                            <option value="LOW">üü¢ LOW (–ù–∏–∑—å–∫–∏–π)</option>
                        </select>
                    </div>

                    <div>
                        <div class="label">–ö—Ä–∞—ó–Ω–∞-–æ—Ç—Ä–∏–º—É–≤–∞—á</div>
                        <select name="requestingCountryId" required>
                            <option value="" disabled selected>–û–±–µ—Ä—ñ—Ç—å –∫—Ä–∞—ó–Ω—É</option>
                            <option th:each="country : ${@countryService.getAllCountries()}"
                                    th:value="${country.id}"
                                    th:text="${country.name}">Country</option>
                        </select>
                    </div>

                    <div>
                        <div class="label">–ö—Ä–∞—ó–Ω–∞-–¥–æ–Ω–æ—Ä (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)</div>
                        <select name="donorCountryId">
                            <option value="">-- –ù–µ –æ–±—Ä–∞–Ω–æ --</option>
                            <option th:each="country : ${@countryService.getAllCountries()}"
                                    th:value="${country.id}"
                                    th:text="${country.name + (country.isOpen() ? ' ‚úÖ' : ' ‚ùå (–∑–∞—á–∏–Ω–µ–Ω–∞)')}"
                                    th:disabled="${!country.isOpen()}">Country</option>
                        </select>
                    </div>

                    <div>
                        <div class="label">–ü–µ—Ä—ñ–æ–¥</div>
                        <select name="periodId" required>
                            <option value="" disabled selected>–û–±–µ—Ä—ñ—Ç—å –ø–µ—Ä—ñ–æ–¥</option>
                            <option th:each="period : ${@periodService.getAllPeriods()}"
                                    th:value="${period.id}"
                                    th:text="${period.periodName + ' (' + period.country.name + ')'}">Period</option>
                        </select>
                    </div>

                    <div>
                        <div class="label">–ü—Ä–∏—á–∏–Ω–∞ –∑–∞–ø–∏—Ç—É (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)</div>
                        <input type="text" name="requestReason" maxlength="500" placeholder="–û–ø–∏—Å –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ —Ü—ñ—î—ó –∑–±—Ä–æ—ó">
                    </div>

                    <button type="submit">‚ûï –°—Ç–≤–æ—Ä–∏—Ç–∏ –ó–∞–ø–∏—Ç</button>
                </form>

                <!-- –§–æ—Ä–º–∞ –ø–æ—à—É–∫—É -->
                <form method="get" action="/" style="margin-top: 20px; background: rgba(0,102,255,0.1);">
                    <div>
                        <div class="label">üîç –ü–æ—à—É–∫ –∑–∞–ø–∏—Ç—É</div>
                        <input type="text"
                               name="searchRequest"
                               placeholder="–ó–±—Ä–æ—è, –∫—Ä–∞—ó–Ω–∞, —Å—Ç–∞—Ç—É—Å, –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç..."
                               th:value="${searchRequest}">
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button type="submit" style="flex: 1;">–®—É–∫–∞—Ç–∏</button>
                        <a th:href="@{/}" class="edit-btn" style="flex: 1; display: flex; align-items: center; justify-content: center; text-decoration: none;">–°–∫–∏–Ω—É—Ç–∏</a>
                    </div>
                </form>

                <!-- –ü–æ—è—Å–Ω–µ–Ω–Ω—è –ø—Ä–æ –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫—É -->
                <div style="background: rgba(0, 204, 255, 0.1); padding: 12px; border-radius: 8px; margin-top: 15px; border-left: 3px solid #00ccff;">
                    <p style="color: #00ccff; margin: 0; font-size: 12px; line-height: 1.5;">
                        üí° <strong>–Ø–∫ –ø—Ä–∞—Ü—é—î:</strong><br>
                        ‚Ä¢ –ó–∞–ø–∏—Ç–∏ –∑—ñ —Å—Ç–∞—Ç—É—Å–æ–º PENDING —á–µ–∫–∞—é—Ç—å —Ä–æ–∑–≥–ª—è–¥—É<br>
                        ‚Ä¢ –ó–∞—á–∏–Ω–µ–Ω—ñ –∫—Ä–∞—ó–Ω–∏ –Ω–µ –º–æ–∂—É—Ç—å –ø—Ä–∏–π–º–∞—Ç–∏ –∑–∞–ø–∏—Ç–∏<br>
                        ‚Ä¢ –ó–∞–≤–µ—Ä—à–µ–Ω—ñ –ø–µ—Ä—ñ–æ–¥–∏ –±–ª–æ–∫—É—é—Ç—å –Ω–æ–≤—ñ –∑–∞–ø–∏—Ç–∏<br>
                        ‚Ä¢ –ü—ñ—Å–ª—è —Å—Ö–≤–∞–ª–µ–Ω–Ω—è –∑–∞–ø–∏—Ç –æ—Ç—Ä–∏–º—É—î —Å—Ç–∞—Ç—É—Å APPROVED
                    </p>
                </div>
            </div>

            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ—à—É–∫—É -->
            <div>
                <!-- –ü–æ–∫–∞–∑—É—î–º–æ —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ —î –ø–æ—à—É–∫ -->
                <div th:if="${searchRequest != null and !searchRequest.isEmpty()}">
                    <div style="padding: 10px; background: rgba(0,102,255,0.2); border-radius: 8px; margin-bottom: 15px;">
                        <p style="color: #00ccff; margin: 0; font-weight: bold;">
                            –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ—à—É–∫—É: <span th:text="${requests.size()}">0</span> –∑–∞–ø–∏—Å—ñ–≤
                        </p>
                    </div>

                    <!-- –°–ø–∏—Å–æ–∫ –∑–Ω–∞–π–¥–µ–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤ -->
                    <ul th:if="${!requests.isEmpty()}">
                        <li th:each="request : ${requests}">
                            <div class="item-info">
                                <div class="item-name">
                                    <span th:text="${request.requestedQuantity}">100</span> –æ–¥.
                                    <span th:text="${request.weaponName}">M777 Howitzer</span>

                                    <!-- –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç -->
                                    <span th:if="${request.priority == 'URGENT'}" style="color: #ff6b6b; font-weight: bold;">üî¥ URGENT</span>
                                    <span th:if="${request.priority == 'HIGH'}" style="color: #ff9500; font-weight: bold;">üü† HIGH</span>
                                    <span th:if="${request.priority == 'MEDIUM'}" style="color: #ffc107; font-weight: bold;">üü° MEDIUM</span>
                                    <span th:if="${request.priority == 'LOW'}" style="color: #90ee90; font-weight: bold;">üü¢ LOW</span>
                                </div>
                                <div class="item-details">
                                    –¢–∏–ø: <span th:text="${request.weaponType}">Artillery</span><br>
                                    –í—ñ–¥: <span th:text="${request.requestingCountry.name}">Ukraine</span>
                                    ‚Üí –î–æ: <span th:text="${request.donorCountry != null ? request.donorCountry.name : '–ù–µ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–æ'}">USA</span><br>
                                    –ü–µ—Ä—ñ–æ–¥: <span th:text="${request.period.periodName}">2024 Q1</span><br>
                                    –î–∞—Ç–∞: <span th:text="${request.requestDate}">2024-01-15</span><br>

                                    <!-- –°—Ç–∞—Ç—É—Å -->
                                    –°—Ç–∞—Ç—É—Å:
                                    <span th:if="${request.status == 'PENDING'}" style="color: #ffc107;">‚è≥ –û—á—ñ–∫—É—î —Ä–æ–∑–≥–ª—è–¥—É</span>
                                    <span th:if="${request.status == 'APPROVED'}" style="color: #90ee90;">‚úÖ –°—Ö–≤–∞–ª–µ–Ω–æ</span>
                                    <span th:if="${request.status == 'REJECTED'}" style="color: #ff6b6b;">‚ùå –í—ñ–¥—Ö–∏–ª–µ–Ω–æ</span>
                                    <span th:if="${request.status == 'DELIVERED'}" style="color: #00ccff;">üì¶ –î–æ—Å—Ç–∞–≤–ª–µ–Ω–æ</span>

                                    <span th:if="${request.requestReason != null and !request.requestReason.isEmpty()}">
                                        <br>–ü—Ä–∏—á–∏–Ω–∞: <span th:text="${request.requestReason}">–ù–µ–æ–±—Ö—ñ–¥–Ω–æ –¥–ª—è –æ–±–æ—Ä–æ–Ω–∏</span>
                                    </span>

                                    <span th:if="${request.rejectionReason != null and !request.rejectionReason.isEmpty()}">
                                        <br><span style="color: #ff6b6b;">–ü—Ä–∏—á–∏–Ω–∞ –≤—ñ–¥–º–æ–≤–∏: <span th:text="${request.rejectionReason}"></span></span>
                                    </span>
                                </div>
                            </div>

                            <div class="item-actions" sec:authorize="hasAuthority('ADMIN')">
                                <!-- –ö–Ω–æ–ø–∫–∏ —Ä–æ–∑—Ç–∞—à–æ–≤–∞–Ω—ñ —Å—Ç–æ–≤–ø—Ü–µ–º -->
                                <div style="display: flex; flex-direction: column; gap: 5px; min-width: 100px;">
                                    <!-- –°—Ö–≤–∞–ª–∏—Ç–∏ (—Ç—ñ–ª—å–∫–∏ –¥–ª—è PENDING) -->
                                    <span th:if="${request.status == 'PENDING'}">
                                        <a th:href="@{/approveRequest/{id}(id=${request.id})}"
                                           class="edit-btn"
                                           style="background: rgba(144, 238, 144, 0.2); border-color: rgba(144, 238, 144, 0.3); color: #90ee90; text-align: center; display: block; padding: 6px 10px;"
                                           onclick="return confirm('–°—Ö–≤–∞–ª–∏—Ç–∏ —Ü–µ–π –∑–∞–ø–∏—Ç?')">‚úÖ –°—Ö–≤–∞–ª–∏—Ç–∏</a>
                                    </span>

                                    <!-- –í—ñ–¥—Ö–∏–ª–∏—Ç–∏ (—Ç—ñ–ª—å–∫–∏ –¥–ª—è PENDING) -->
                                    <span th:if="${request.status == 'PENDING'}">
                                        <a href="javascript:void(0)"
                                           class="delete-btn"
                                           style="text-align: center; display: block; padding: 6px 10px;"
                                           th:onclick="'showRejectModal(' + ${request.id} + ')'">‚ùå –í—ñ–¥—Ö–∏–ª–∏—Ç–∏</a>
                                    </span>

                                    <!-- –í–∏–¥–∞–ª–∏—Ç–∏ (–¥–ª—è –≤—Å—ñ—Ö –∫—Ä—ñ–º DELIVERED) -->
                                    <span th:if="${request.status != 'DELIVERED'}">
                                        <a th:href="@{/deleteRequest/{id}(id=${request.id})}"
                                           class="delete-btn"
                                           style="text-align: center; display: block; padding: 6px 10px;"
                                           onclick="return confirm('–í–∏–¥–∞–ª–∏—Ç–∏ —Ü–µ–π –∑–∞–ø–∏—Ç?')">üóëÔ∏è –í–∏–¥–∞–ª–∏—Ç–∏</a>
                                    </span>
                                </div>
                            </div>
                        </li>
                    </ul>

                    <!-- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ -->
                    <div th:if="${requests.isEmpty()}" style="padding: 15px; background: rgba(255,107,107,0.1); border-radius: 8px; text-align: center;">
                        <p style="color: #ff6b6b; margin: 0;">
                            ‚ùå –ó–∞–ø–∏—Ç—ñ–≤ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –∑–∞ –∑–∞–ø–∏—Ç–æ–º "<span th:text="${searchRequest}"></span>"
                        </p>
                    </div>
                </div>

                <!-- –ü—ñ–¥–∫–∞–∑–∫–∞ –∫–æ–ª–∏ –Ω–µ–º–∞—î –ø–æ—à—É–∫—É -->
                <div th:if="${searchRequest == null or searchRequest.isEmpty()}" style="padding: 20px; background: rgba(255,255,255,0.03); border-radius: 8px; text-align: center;">
                    <p style="color: #bbb; margin: 0;">
                        üí° –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –ø–æ—à—É–∫ –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤
                    </p>
                </div>
            </div>
        </div>
    </div>

</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –¥–ª—è –≤—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è –∑–∞–ø–∏—Ç—É -->
<div id="rejectModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; align-items: center; justify-content: center;">
    <div style="background: #1f2335; border-radius: 10px; padding: 30px; max-width: 500px; width: 90%; border: 1px solid rgba(255,255,255,0.1);">
        <h2 style="color: #ff6b6b; margin-top: 0;">‚ùå –í—ñ–¥—Ö–∏–ª–∏—Ç–∏ –∑–∞–ø–∏—Ç</h2>
        <form id="rejectForm" method="post">
            <div style="margin-bottom: 20px;">
                <label style="color: #90ee90; display: block; margin-bottom: 10px;">–ü—Ä–∏—á–∏–Ω–∞ –≤—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è:</label>
                <textarea name="rejectionReason"
                          required
                          rows="4"
                          style="width: 100%; padding: 10px; border: 1px solid #444; border-radius: 5px; background: rgba(255,255,255,0.1); color: #e0e0e0; font-size: 14px; font-family: inherit;"
                          placeholder="–í–∫–∞–∂—ñ—Ç—å –ø—Ä–∏—á–∏–Ω—É –≤—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è –∑–∞–ø–∏—Ç—É..."></textarea>
            </div>
            <div style="display: flex; gap: 10px;">
                <button type="submit" style="flex: 1; background: linear-gradient(135deg, #ff6b6b, #ff9500);">–í—ñ–¥—Ö–∏–ª–∏—Ç–∏</button>
                <button type="button" onclick="closeRejectModal()" style="flex: 1; background: rgba(255,255,255,0.1);">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
            </div>
        </form>
    </div>
</div>

<script>
    function showRejectModal(requestId) {
        const modal = document.getElementById('rejectModal');
        const form = document.getElementById('rejectForm');
        form.action = '/rejectRequest/' + requestId;
        modal.style.display = 'flex';
    }

    function closeRejectModal() {
        document.getElementById('rejectModal').style.display = 'none';
    }

    // –ó–∞–∫—Ä–∏—Ç—Ç—è –º–æ–¥–∞–ª–∫–∏ –ø—Ä–∏ –∫–ª—ñ–∫—É –ø–æ–∑–∞ –Ω–µ—é
    document.getElementById('rejectModal')?.addEventListener('click', function(e) {
        if (e.target === this) {
            closeRejectModal();
        }
    });
</script>

</body>
</html>